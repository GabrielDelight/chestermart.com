"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[967],{6222:(e,t,a)=>{a.d(t,{Z:()=>S});var i=a(2791),r=a(6355),s=a(3504),n=a(3024),l=a(5706),c=a(9126),o=a(1830),d=a.n(o),u=a(2189);const _="CreateRatings_container__QdrFd",h="CreateRatings_wrapper__CxQ8N",m="CreateRatings_star_wrapper__ZmWve";var p=a(184);const x=e=>{let{productId:t,onCloseHandler:a}=e;const[s]=(0,u.f9)();let[n,l]=(0,i.useState)(0),[o,x]=(0,i.useState)("");return(0,p.jsx)("div",{className:_,id:"wrapper-close",children:(0,p.jsxs)("div",{className:h,children:[(0,p.jsxs)("header",{children:[(0,p.jsx)("p",{children:"Ratings and Review"}),(0,p.jsx)(r.aHS,{onClick:a})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:m,children:[0,1,2,3,4].map((e=>(0,p.jsx)("div",{onClick:()=>(e=>{l(e+1)})(e),children:n<=e?(0,p.jsx)(c.RrZ,{color:"chocolate",size:25}):(0,p.jsx)(c.kRm,{color:"chocolate",size:25})},e)))}),(0,p.jsx)("textarea",{onChange:e=>x(e.target.value),placeholder:"Enter a review",name:"",id:"",maxLength:100}),(0,p.jsx)("button",{onClick:()=>n<1?alert("Please give a rating"):o.length<1?alert("Please enter your review"):void s({url:"/ratings",body:{rating:n,comment:o,productId:t}}).unwrap().then((e=>{console.log(e),d().fire({icon:"success",text:e.message}),a()})).catch((e=>{d().fire({icon:"error",title:"Oops...",text:e.data.message}),console.log(e)})),children:"Submit"})]})]})})},j="CartList_main__nKEPP",g="CartList_img_wrapper__0sepj",v="CartList_details_wrapper__kS+N6",w="CartList_qty_wrapper__oawpH",C="CartList_cart_btn__wt2wI",b="CartList_btn_wrapper__xfOEy",y="CartList_big_txt__mjvt5",N="CartList_price_wrapper__KOTCf",S=e=>{var t;let{item:a,isCart:c=!1,hasRatings:o=!1}=e;const d=e=>{let t=JSON.parse(window.localStorage.getItem("cart")||"[]");if(t.filter((e=>e._id===a._id)).length>0)return t.map((t=>(t._id===a._id&&(t.quantity>=1?("inc"==e&&(t.quantity+=1),"dsc"==e&&(t.quantity-=1)):t.quantity=1),t))),void localStorage.setItem("cart",JSON.stringify(t))},[u,_]=(0,i.useState)(!1),h=()=>{_(!u)};return(0,p.jsxs)("div",{className:j,children:[(0,p.jsx)("div",{className:g,children:(0,p.jsx)(s.rU,{to:"/product/"+a._id,children:(0,p.jsx)(l.Z,{src:(0,n.r)()+a.image1,alt:""})})}),(0,p.jsxs)("div",{className:v,children:[(0,p.jsxs)("p",{className:y,children:[a.name," (",a.brand,")"]}),(0,p.jsx)("div",{className:N,children:(0,p.jsx)("div",{children:(0,p.jsxs)("b",{children:[null===a||void 0===a||null===(t=a.price)||void 0===t?void 0:t.toLocaleString("en")," x ",a.quantity," = $",((null===a||void 0===a?void 0:a.price)*a.quantity).toLocaleString()]})})}),c&&(0,p.jsxs)("div",{className:b,children:[(0,p.jsxs)("div",{className:w,children:[(0,p.jsx)("button",{onClick:()=>d("dsc"),disabled:1===a.quantity,children:(0,p.jsx)(r.bUI,{})}),(0,p.jsx)("input",{type:"number",disabled:!0,value:a.quantity}),(0,p.jsx)("button",{onClick:()=>d("inc"),children:(0,p.jsx)(r.Dli,{})})]}),(0,p.jsxs)("button",{className:C,onClick:()=>{if(!window.confirm("Are you sure you want to remove this item from your cart?"))return;let e=JSON.parse(window.localStorage.getItem("cart")||"[]").filter((e=>e._id!==a._id));localStorage.setItem("cart",JSON.stringify(e))},children:[" ","Remove"]})]}),o&&(0,p.jsxs)("button",{className:C,onClick:h,children:[" ","Give a review"]}),u&&(0,p.jsx)(x,{productId:a._id,onCloseHandler:h})]})]})}},7967:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var i=a(2791),r=a(3504),s=a(6222),n=a(3543),l=a(7512),c=a(2189);const o={main:"Cart_main__DJNp6",title:"Cart_title__Y+URu",cart_sub_title:"Cart_cart_sub_title__SrLd-"};var d=a(184);const u=function(){const{data:e}=(0,c.$L)("/user"),[t,a]=(0,i.useState)(!0);(0,i.useEffect)((()=>{a(!!e)}),[e]);let[u,_]=(0,i.useState)([]),[h,m]=(0,i.useState)(0);return(0,i.useEffect)((()=>{setInterval((()=>{let e=JSON.parse(window.localStorage.getItem("cart")||"[]");if(_(e),e.length>0){let t=e.map((e=>(e.total=e.price*e.quantity,e))).map((e=>e.total)).reduce(((e,t)=>e+t),0);m(t)}}),100)}),[]),(0,d.jsx)(l.Z,{children:(0,d.jsxs)("main",{className:o.main,children:[(0,d.jsxs)("article",{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:o.title,children:"My Cart"}),(0,d.jsx)("p",{className:o.cart_sub_title,children:"You have amzing items in yout cart, you can simple inclreade the wauntity or you cart and the balance will be topped as well"})]}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:o.cart_wrapper,children:u.map((e=>(0,d.jsx)(s.Z,{isCart:!0,item:e},e.id)))}),u.length<1&&(0,d.jsx)(n.Z,{})]}),(0,d.jsxs)("aside",{children:[(0,d.jsxs)("h1",{children:["Total: $",h.toLocaleString("en")]}),t?(0,d.jsx)(r.rU,{to:"/checkout",children:(0,d.jsx)("button",{children:"Checkout now"})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)("p",{children:"You need to log in to proceed to checkout. Please log in to continue."}),(0,d.jsx)(r.rU,{to:"/login?redirect=checkout",children:(0,d.jsx)("button",{children:"Login "})})]})]})]})})}}}]);
//# sourceMappingURL=967.2fe8ed3c.chunk.js.map