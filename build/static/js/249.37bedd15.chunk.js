"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[249],{9970:(e,r,n)=>{n.d(r,{Z:()=>w});var t=n(2791);const i="AdminHeader_header__sB--Q",a="AdminHeader_left___VmarK",s="AdminHeader_right___pJNOw",o="AdminHeader_user_profile__MVNOS",d="AdminHeader_logo__VAzAj",l="AdminHeader_mobile_sidebar__ZSzgU",c="AdminHeader_wrapper__FkuIb",h="AdminHeader_close_wrapper__ku66r",u="AdminHeader_menu__RYwvI";var p=n(6355),m=n(3504),v=n(6871),f=n(335),j=n(5706),x=n(3853);const b="AdminSideBar_main__MXOiO";var y=n(184);const g=function(){return(0,y.jsx)("div",{className:b,children:(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:(0,y.jsx)(m.rU,{to:"/admin/dashboard",children:"Dashboard"})}),(0,y.jsx)("li",{children:(0,y.jsx)(m.rU,{to:"/admin/orders",children:"Orders"})}),(0,y.jsx)("li",{children:(0,y.jsx)(m.rU,{to:"/admin/products",children:"Products"})}),(0,y.jsx)("li",{children:(0,y.jsx)(m.rU,{to:"/admin/brands",children:"Brands"})}),(0,y.jsx)("li",{children:(0,y.jsx)(m.rU,{to:"/admin/categories",children:"Categories"})}),(0,y.jsx)("li",{children:(0,y.jsx)(m.rU,{to:"/admin/users",children:"Users"})}),(0,y.jsx)("li",{children:(0,y.jsx)(m.rU,{to:"/admin/admins",children:"Admins"})}),(0,y.jsx)("li",{children:(0,y.jsx)(m.rU,{to:"/admin/login",style:{color:"red"},children:"Logout"})})]})})};const _=function(){(0,t.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{data:e,refetch:r}=(0,f.rS)("/admin"),n=(0,v.s0)(),b=localStorage.getItem("admin-token"),_=(e=>{if(!e||"undefined"===e)return void n("/admin/login");const r=JSON.parse(atob(e.split(".")[1]));return Math.floor(Date.now()/1e3)>=r.exp})(b);console.log("===>",_),(0,t.useEffect)((()=>{_&&alert("Session has expired"),(_||!b||b.length<1)&&n("/admin/login")}),[_]);const[O,w]=(0,t.useState)(!1),T=()=>{w(!O)};return(0,y.jsxs)("div",{className:i,children:[(0,y.jsx)("div",{className:a,children:(0,y.jsxs)("div",{className:d,children:[(0,y.jsx)(m.rU,{to:"/admin/dashboard","aria-label":"logo",children:(0,y.jsx)(j.Z,{src:"/images/logo.webp",width:50,height:50})})," "]})}),(0,y.jsxs)("div",{className:s,children:[(0,y.jsx)(m.rU,{to:"/admin/dashboard","aria-label":"User name",children:(0,y.jsxs)("div",{className:o,children:[(0,y.jsx)("span",{children:null===e||void 0===e?void 0:e.firstname.substr(0,1)}),(0,y.jsx)("span",{children:null===e||void 0===e?void 0:e.lastname.substr(0,1)})]})}),(0,y.jsx)("div",{className:u,children:(0,y.jsx)(x.cur,{size:25,onClick:T})})]}),O&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{id:"mobile_wrapper",className:l,onClick:e=>{var r;"mobile_wrapper"===(null===(r=e.target)||void 0===r?void 0:r.id)&&T()},children:(0,y.jsxs)("div",{className:c,children:[(0,y.jsx)("div",{className:h,children:(0,y.jsx)(p.aHS,{size:45,color:"white",onClick:T})}),(0,y.jsx)(g,{})]})})})]})},O="AdminWrapperStyles_main__ndYGg",w=e=>{let{children:r}=e;const[n,i]=(0,t.useState)(!0);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(_,{}),(0,y.jsxs)("main",{className:O,children:[(0,y.jsx)("aside",{children:(0,y.jsx)(g,{})}),(0,y.jsx)("article",{children:r})]})]})}},8249:(e,r,n)=>{n.r(r),n.d(r,{default:()=>y});var t=n(2791),i=n(9970),a=n(5336),s=(n(6338),n(4378)),o=n(6871),d=n(3504),l=n(9126),c=n(335),h=n(3024),u=n(1830),p=n.n(u),m=n(3543),v=n(1574),f=n(2189),j=n(5895),x=n(5706),b=n(184);const y=function(){const e=(0,o.s0)(),[r]=(0,c.J8)(),[n,u]=(0,t.useState)(10),{ref:y,inView:g}=(0,j.YD)({threshold:.1}),{data:_=[],isLoading:O,refetch:w}=(0,f.$L)("/products?limit="+n),{data:T}=(0,f.$L)("/products-length");return(0,t.useEffect)((()=>{g&&(console.log("Inview"),u(n+10),setTimeout((()=>{w()}),100))}),[g]),(0,b.jsxs)(i.Z,{children:[(0,b.jsxs)("div",{className:s.Z.main_,children:[(0,b.jsx)("div",{children:(0,b.jsxs)("header",{className:s.Z.header,children:[(0,b.jsxs)("h1",{children:["Products (",null===T||void 0===T?void 0:T.length,")"]}),(0,b.jsx)(d.rU,{to:"/admin/products/create",children:(0,b.jsxs)("button",{children:[(0,b.jsx)(l.L3d,{size:30}),"Create"]})})]})}),_.length>0&&(0,b.jsxs)(a.iA,{children:[(0,b.jsx)(a.hr,{children:(0,b.jsxs)(a.Tr,{children:[(0,b.jsx)(a.Th,{children:"S/N"}),(0,b.jsx)(a.Th,{children:"Product Id"}),(0,b.jsx)(a.Th,{children:"Name"}),(0,b.jsx)(a.Th,{children:"Description"}),(0,b.jsx)(a.Th,{children:"Price"}),(0,b.jsx)(a.Th,{children:"Brand"}),(0,b.jsx)(a.Th,{children:"Category"}),(0,b.jsx)(a.Th,{children:"Status"}),(0,b.jsx)(a.Th,{children:"Image 1"}),(0,b.jsx)(a.Th,{children:"Created at"}),(0,b.jsx)(a.Th,{children:"View"}),(0,b.jsx)(a.Th,{children:"Update"}),(0,b.jsx)(a.Th,{children:"Delete"})]})}),(0,b.jsx)(a.p3,{children:_.map(((n,t)=>{var i,s;return(0,b.jsxs)(a.Tr,{children:[(0,b.jsx)(a.Td,{children:t+1}),(0,b.jsx)(a.Td,{children:(null===n||void 0===n||null===(i=n._id)||void 0===i?void 0:i.substr(0,20))+"..."}),(0,b.jsx)(a.Td,{children:null===n||void 0===n?void 0:n.name}),(0,b.jsx)(a.Td,{children:null===n||void 0===n||null===(s=n.description)||void 0===s?void 0:s.substr(0,20)}),(0,b.jsx)(a.Td,{children:null===n||void 0===n?void 0:n.price}),(0,b.jsx)(a.Td,{children:null===n||void 0===n?void 0:n.brand}),(0,b.jsx)(a.Td,{children:null===n||void 0===n?void 0:n.category}),(0,b.jsx)(a.Td,{children:null===n||void 0===n?void 0:n.status}),(0,b.jsx)(a.Td,{children:(0,b.jsx)(x.Z,{width:50,height:50,src:(0,h.r)()+(null===n||void 0===n?void 0:n.image1),alt:""})}),(0,b.jsx)(a.Td,{children:new Date(null===n||void 0===n?void 0:n.createdAt).toLocaleDateString()}),(0,b.jsx)(a.Td,{onClick:()=>{return r=null===n||void 0===n?void 0:n._id,void e("/product/"+r);var r},children:(0,b.jsx)("button",{children:"View"})}),(0,b.jsx)(a.Td,{onClick:()=>{return r=null===n||void 0===n?void 0:n._id,void e("/update-product/"+r);var r},children:(0,b.jsx)("button",{children:"Update"})}),(0,b.jsx)(a.Td,{onClick:()=>{return e=null===n||void 0===n?void 0:n._id,void(window.confirm("Are you sure you want to delete this product?")&&r({url:"/delete-product/"+e,body:{}}).unwrap().then((e=>{p().fire({icon:"success",title:e.message}),console.log(e)})).catch((e=>{p().fire({icon:"error",title:"Oops...",text:e.data.message}),console.log(e)})));var e},children:(0,b.jsx)("button",{children:"Delete"})})]},t)}))})]}),O&&(0,b.jsx)(v.Z,{}),_.length<1&&!1===O?(0,b.jsx)(m.Z,{}):null]}),(0,b.jsx)("div",{ref:y,style:{height:"20px"}})]})}},5336:(e,r,n)=>{n.d(r,{iA:()=>u,p3:()=>m,Td:()=>x,Th:()=>y,hr:()=>_,Tr:()=>P});var t=n(2791),i=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(t=Object.getOwnPropertySymbols(e);i<t.length;i++)r.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(n[t[i]]=e[t[i]])}return n},a=function(e){e.inHeader,e.columnKey,e.headers,e.forwardedRef;return i(e,["inHeader","columnKey","headers","forwardedRef"])};const s=a;var o=(0,t.createContext)(void 0);function d(e){var r=e.children,n=(0,t.useState)([]),i=n[0],a=n[1],s=(0,t.useMemo)((function(){return{headers:i,setHeaders:a}}),[i]);return t.createElement(o.Provider,{value:s},r)}var l=function(){return l=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},l.apply(this,arguments)},c=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(t=Object.getOwnPropertySymbols(e);i<t.length;i++)r.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(n[t[i]]=e[t[i]])}return n},h=(0,t.forwardRef)((function(e,r){var n=e.className,i=c(e,["className"]),s="".concat(n||""," responsiveTable");return t.createElement("table",l({"data-testid":"table"},a(i),{className:s,ref:r}))}));h.displayName="Table";const u=function(e){return t.createElement(d,null,t.createElement(h,l({},e)))};var p=function(){return p=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},p.apply(this,arguments)};const m=function(e){return t.createElement("tbody",p({"data-testid":"tbody"},s(e)))};var v=function(){return v=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},v.apply(this,arguments)};const f=function(e){var r=e.headers,n=e.children,i=e.columnKey,a=e.className,o=e.colSpan,d="".concat(a||""," pivoted");return o?t.createElement("td",v({"data-testid":"td"},s(e))):t.createElement("td",v({"data-testid":"td"},s(e),{className:d}),t.createElement("div",{"data-testid":"td-before",className:"tdBefore"},r[i]),null!==n&&void 0!==n?n:t.createElement("div",null,"\xa0"))};var j=function(){return j=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},j.apply(this,arguments)};const x=function(e){var r=(0,t.useContext)(o);if(!r)throw new Error("Td must be used as a child of the Table component");var n=r.headers;return t.createElement(f,j({},e,{headers:n}))};var b=function(){return b=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},b.apply(this,arguments)};const y=function(e){return t.createElement("th",b({"data-testid":"th"},s(e)))};var g=function(){return g=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},g.apply(this,arguments)};const _=function(e){var r=e.children;return t.createElement("thead",g({"data-testid":"thead"},s(e)),t.cloneElement(r,{inHeader:!0}))};var O=function(){return O=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},O.apply(this,arguments)},w=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(t=Object.getOwnPropertySymbols(e);i<t.length;i++)r.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(n[t[i]]=e[t[i]])}return n},T=function(e,r,n){if(n||2===arguments.length)for(var t,i=0,a=r.length;i<a;i++)!t&&i in r||(t||(t=Array.prototype.slice.call(r,0,i)),t[i]=r[i]);return e.concat(t||Array.prototype.slice.call(r))};const E=function(e){var r=e.children,n=e.inHeader,i=w(e,["children","inHeader"]),a=(0,t.useContext)(o);if(!a)throw new Error("TrInner must be used as a child of the Table component");var d=a.setHeaders,l=a.headers;return(0,t.useEffect)((function(){if(n){var e=T([],l,!0);t.Children.forEach(r,(function(r,n){t.isValidElement(r)&&(e[n]=r.props.children)})),d(e)}}),[n,r]),t.createElement("tr",O({"data-testid":"tr"},s(i)),r&&t.Children.map(r,(function(e,r){return t.isValidElement(e)?t.cloneElement(e,{key:r,columnKey:r}):null})))};var N=function(){return N=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},N.apply(this,arguments)};const P=function(e){var r=(0,t.useContext)(o);if(!r)throw new Error("Tr must be used as a child of the Table component");var n=r.headers;return t.createElement(E,N({},e,{headers:n}))}},6338:()=>{},4378:(e,r,n)=>{n.d(r,{Z:()=>t});const t={main_:"AdminProduct_main___7RKKN",custome_td_width:"AdminProduct_custome_td_width__e2v6b",header:"AdminProduct_header__HaSIW"}}}]);
//# sourceMappingURL=249.37bedd15.chunk.js.map