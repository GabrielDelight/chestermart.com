"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[606],{9970:(e,r,a)=>{a.d(r,{Z:()=>w});var s=a(2791);const i="AdminHeader_header__sB--Q",n="AdminHeader_left___VmarK",l="AdminHeader_right___pJNOw",d="AdminHeader_user_profile__MVNOS",o="AdminHeader_logo__VAzAj",t="AdminHeader_mobile_sidebar__ZSzgU",c="AdminHeader_wrapper__FkuIb",m="AdminHeader_close_wrapper__ku66r",p="AdminHeader_menu__RYwvI";var h=a(6355),x=a(3504),_=a(6871),u=a(335),g=a(5706),j=a(3853);const v="AdminSideBar_main__MXOiO";var b=a(184);const f=function(){return(0,b.jsx)("div",{className:v,children:(0,b.jsxs)("ul",{children:[(0,b.jsx)("li",{children:(0,b.jsx)(x.rU,{to:"/admin/dashboard",children:"Dashboard"})}),(0,b.jsx)("li",{children:(0,b.jsx)(x.rU,{to:"/admin/orders",children:"Orders"})}),(0,b.jsx)("li",{children:(0,b.jsx)(x.rU,{to:"/admin/products",children:"Products"})}),(0,b.jsx)("li",{children:(0,b.jsx)(x.rU,{to:"/admin/brands",children:"Brands"})}),(0,b.jsx)("li",{children:(0,b.jsx)(x.rU,{to:"/admin/categories",children:"Categories"})}),(0,b.jsx)("li",{children:(0,b.jsx)(x.rU,{to:"/admin/users",children:"Users"})}),(0,b.jsx)("li",{children:(0,b.jsx)(x.rU,{to:"/admin/admins",children:"Admins"})}),(0,b.jsx)("li",{children:(0,b.jsx)(x.rU,{to:"/admin/login",style:{color:"red"},children:"Logout"})})]})})};const y=function(){(0,s.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{data:e,refetch:r}=(0,u.rS)("/admin"),a=(0,_.s0)(),v=localStorage.getItem("admin-token"),y=(e=>{if(!e||"undefined"===e)return void a("/admin/login");const r=JSON.parse(atob(e.split(".")[1]));return Math.floor(Date.now()/1e3)>=r.exp})(v);console.log("===>",y),(0,s.useEffect)((()=>{y&&alert("Session has expired"),(y||!v||v.length<1)&&a("/admin/login")}),[y]);const[N,w]=(0,s.useState)(!1),C=()=>{w(!N)};return(0,b.jsxs)("div",{className:i,children:[(0,b.jsx)("div",{className:n,children:(0,b.jsxs)("div",{className:o,children:[(0,b.jsx)(x.rU,{to:"/admin/dashboard","aria-label":"logo",children:(0,b.jsx)(g.Z,{src:"/images/logo.webp",width:50,height:50})})," "]})}),(0,b.jsxs)("div",{className:l,children:[(0,b.jsx)(x.rU,{to:"/admin/dashboard","aria-label":"User name",children:(0,b.jsxs)("div",{className:d,children:[(0,b.jsx)("span",{children:null===e||void 0===e?void 0:e.firstname.substr(0,1)}),(0,b.jsx)("span",{children:null===e||void 0===e?void 0:e.lastname.substr(0,1)})]})}),(0,b.jsx)("div",{className:p,children:(0,b.jsx)(j.cur,{size:25,onClick:C})})]}),N&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{id:"mobile_wrapper",className:t,onClick:e=>{var r;"mobile_wrapper"===(null===(r=e.target)||void 0===r?void 0:r.id)&&C()},children:(0,b.jsxs)("div",{className:c,children:[(0,b.jsx)("div",{className:m,children:(0,b.jsx)(h.aHS,{size:45,color:"white",onClick:C})}),(0,b.jsx)(f,{})]})})})]})},N="AdminWrapperStyles_main__ndYGg",w=e=>{let{children:r}=e;const[a,i]=(0,s.useState)(!0);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y,{}),(0,b.jsxs)("main",{className:N,children:[(0,b.jsx)("aside",{children:(0,b.jsx)(f,{})}),(0,b.jsx)("article",{children:r})]})]})}},1606:(e,r,a)=>{a.r(r),a.d(r,{default:()=>g});var s=a(2791),i=a(9970),n=a(5186),l=a(5705),d=a(8007),o=a(9126),t=a(2189),c=a(335),m=a(1830),p=a.n(m),h=a(6871),x=a(1574),_=a(184);const u=d.Ry().shape({name:d.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Please enter your first name"),description:d.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Please eneter your last name"),category:d.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Please eneter your last name"),brand:d.Z_().min(2,"Too Short!").max(190,"Too Long!").required("Phone number is required"),price:d.Z_().min(2,"Too Short!").max(190,"Too Long!").required("Price is required")});const g=function(){let[e,r]=(0,s.useState)([]);const a=(0,h.s0)(),[d,m]=(0,s.useState)({property:"",value:""}),g=e=>{m((r=>({...r,[e.target.name]:e.target.value})))},[j,v]=(0,s.useState)({image1:null,image2:null,image3:null}),[b,f]=(0,s.useState)({image1:"",image2:"",image3:""}),{data:y=[]}=(0,t.$L)("/brands"),{data:N=[]}=(0,t.$L)("/categories"),[w,{isLoading:C}]=(0,c.J8)(),Z=()=>{if(e.filter((e=>e.property===d.property)).length>0)return alert("Item already exists");r([...e,{...d,id:Math.random().toString()}]),F((e=>({...e,spec:""})))},S=(e,r)=>{var a,s;const i=null===(a=e.target)||void 0===a||null===(s=a.files)||void 0===s?void 0:s[0];v((e=>({...e,[r]:i}))),i&&(f((e=>({...e,[r]:URL.createObjectURL(i)}))),F((e=>({...e,images:""}))))},[P,F]=(0,s.useState)({spec:"",images:""});return console.log(":::",P),(0,_.jsx)(i.Z,{children:(0,_.jsx)("div",{children:(0,_.jsx)(l.J9,{initialValues:{name:"",description:"",category:"",brand:"",price:""},onSubmit:r=>{if(console.log("::::",r),e.length<1)return F((e=>({...e,spec:"Please add specifications"}))),console.log("Please add specifications");if(!j.image1)return F((e=>({...e,images:"Please ensure you add at least the initial product images."}))),console.log("Please add product images (3)");const s=new FormData;s.append("name",r.name),s.append("description",r.description),s.append("category",r.category),s.append("brand",r.brand),s.append("price",r.price),s.append("specifications",JSON.stringify(e)),s.append("uploads",j.image1),j.image2&&s.append("uploads",j.image2),j.image3&&s.append("uploads",j.image3),w({url:"/product",body:s}).unwrap().then((e=>{p().fire({icon:"success",title:e.message}),a("/product/"+e._id),console.log(e)})).catch((e=>{p().fire({icon:"error",title:"Oops...",text:e.data.message}),console.log(e)}))},validationSchema:u,children:a=>{let{handleChange:s,handleSubmit:i,setFieldTouched:l,touched:t,isValid:c,values:m,errors:p}=a;return(0,_.jsxs)("div",{className:n.Z.form,children:[(0,_.jsx)("p",{className:n.Z.form_title,children:"Create product"}),(0,_.jsxs)("div",{className:n.Z.form_row,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"",children:" Name"}),(0,_.jsx)("input",{type:"text",placeholder:"John",name:"name",value:m.name,onChange:s("name")}),t.name&&p.name&&(0,_.jsx)("p",{className:n.Z.error,children:p.name})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"",children:" Description"}),(0,_.jsx)("input",{type:"text",placeholder:"enter product description",name:"description",value:m.description,onChange:s("description")}),t.description&&p.description&&(0,_.jsx)("p",{className:n.Z.error,children:p.description})]})]}),(0,_.jsxs)("div",{className:n.Z.form_row,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"",children:"Category"}),(0,_.jsxs)("select",{name:"category",id:"",value:m.category,onChange:s("category"),children:[(0,_.jsx)("option",{value:"",children:"Select Category"}),N.map(((e,r)=>(0,_.jsx)("option",{value:e.name,children:e.name},r)))]}),t.category&&p.category&&(0,_.jsx)("p",{className:n.Z.error,children:p.category})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"",children:"Brand"}),(0,_.jsxs)("select",{name:"brand",id:"",value:m.brand,onChange:s("brand"),children:[(0,_.jsx)("option",{value:"",children:"Select brand"}),y.map(((e,r)=>(0,_.jsx)("option",{value:e.name,children:e.name},r)))]}),t.brand&&p.brand&&(0,_.jsx)("p",{className:n.Z.error,children:p.brand})]})]}),(0,_.jsxs)("div",{className:n.Z.form_list,children:[(0,_.jsx)("label",{htmlFor:"",children:" Price"}),(0,_.jsx)("input",{type:"number",placeholder:"Enter product price",name:"price",value:m.price,onChange:s("price")}),t.price&&p.price&&(0,_.jsx)("p",{className:n.Z.error,children:p.price})]}),(0,_.jsxs)("div",{className:n.Z.form_row_2,children:[(0,_.jsxs)("div",{className:n.Z.form_row_2_xx,children:[(0,_.jsx)("label",{htmlFor:"",children:"Enter specifications "}),(0,_.jsxs)("div",{className:n.Z.spec_wrapper,children:[(0,_.jsx)("input",{type:"text",name:"property",placeholder:"Property",onChange:g}),(0,_.jsx)("input",{type:"text",name:"value",placeholder:"Value",onChange:g}),(0,_.jsx)("button",{disabled:""===d.property||""===d.value,onClick:Z,children:"Add Spec"}),P.spec&&(0,_.jsx)("p",{className:n.Z.error,children:P.spec})]}),(0,_.jsx)("div",{className:n.Z.form_row_2_xx,children:e.map((a=>(0,_.jsxs)("div",{className:n.Z.spec_items,children:[(0,_.jsxs)("b",{children:[a.property,":"]})," ",(0,_.jsx)("span",{children:a.value})," ",(0,_.jsx)("b",{children:(0,_.jsx)(o.yvY,{onClick:()=>(a=>{let s=e.filter((e=>e.id!==a));r(s)})(a.id)})})]})))})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"",children:"Add images "}),(0,_.jsxs)("div",{className:n.Z.img_wrappers,children:[(0,_.jsxs)("div",{className:n.Z.img_box_wrapper,children:[b.image1.length>0&&(0,_.jsx)("img",{src:b.image1,alt:""}),(0,_.jsxs)("div",{className:n.Z.plus_wrapper,children:[(0,_.jsxs)("label",{htmlFor:"img1",children:[(0,_.jsx)(o.B8K,{size:25}),(0,_.jsx)("input",{type:"file",id:"img1",style:{display:"none"},name:"image1",accept:"image/*",onChange:e=>S(e,"image1")})]})," "]})]}),(0,_.jsxs)("div",{className:n.Z.img_box_wrapper,children:[b.image2.length>0&&(0,_.jsx)("img",{src:b.image2,alt:""})," ",(0,_.jsx)("div",{className:n.Z.plus_wrapper,children:(0,_.jsxs)("label",{htmlFor:"img2",children:[(0,_.jsx)(o.B8K,{size:25}),(0,_.jsx)("input",{type:"file",id:"img2",style:{display:"none"},name:"image2",onChange:e=>S(e,"image2")})]})})]}),(0,_.jsxs)("div",{className:n.Z.img_box_wrapper,children:[b.image3.length>0&&(0,_.jsx)("img",{src:b.image3,alt:""})," ",(0,_.jsxs)("div",{className:n.Z.plus_wrapper,children:[(0,_.jsxs)("label",{htmlFor:"img3",children:[(0,_.jsx)(o.B8K,{size:25}),(0,_.jsx)("input",{type:"file",id:"img3",style:{display:"none"},name:"image3",accept:"image/*",onChange:e=>S(e,"image3")})]})," "]})]})]}),P.images&&(0,_.jsx)("p",{className:n.Z.error,children:P.images})]})]}),(0,_.jsx)("br",{}),(0,_.jsx)("div",{className:n.Z.form_list,children:(0,_.jsx)("button",{type:"submit",onClick:()=>i(),children:C?(0,_.jsx)(x.Z,{}):"Next"})})]})}})})})}},5186:(e,r,a)=>{a.d(r,{Z:()=>s});const s={form_title:"CreateProduct_form_title__HmxAO",form_row:"CreateProduct_form_row__HNkF0",form:"CreateProduct_form__zfJNk",form_list:"CreateProduct_form_list__lIEP-",img_box_wrapper:"CreateProduct_img_box_wrapper__phS+W",plus_wrapper:"CreateProduct_plus_wrapper__Wko1F",img_wrappers:"CreateProduct_img_wrappers__CmIXC",form_row_2:"CreateProduct_form_row_2__LfdH7",form_row_2_xx:"CreateProduct_form_row_2_xx__coIFf",error:"CreateProduct_error__c5CDF",spec_items:"CreateProduct_spec_items__CVOgx",spec_wrapper:"CreateProduct_spec_wrapper__RvFNo"}}}]);
//# sourceMappingURL=606.645af9ae.chunk.js.map