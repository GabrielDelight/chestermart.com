"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[399],{9970:(e,r,i)=>{i.d(r,{Z:()=>w});var a=i(2791);const s="AdminHeader_header__sB--Q",n="AdminHeader_left___VmarK",l="AdminHeader_right___pJNOw",d="AdminHeader_user_profile__MVNOS",o="AdminHeader_logo__VAzAj",t="AdminHeader_mobile_sidebar__ZSzgU",c="AdminHeader_wrapper__FkuIb",m="AdminHeader_close_wrapper__ku66r",p="AdminHeader_menu__RYwvI";var h=i(6355),u=i(3504),x=i(6871),_=i(335),g=i(5706),j=i(3853);const v="AdminSideBar_main__MXOiO";var f=i(184);const b=function(){return(0,f.jsx)("div",{className:v,children:(0,f.jsxs)("ul",{children:[(0,f.jsx)("li",{children:(0,f.jsx)(u.rU,{to:"/admin/dashboard",children:"Dashboard"})}),(0,f.jsx)("li",{children:(0,f.jsx)(u.rU,{to:"/admin/orders",children:"Orders"})}),(0,f.jsx)("li",{children:(0,f.jsx)(u.rU,{to:"/admin/products",children:"Products"})}),(0,f.jsx)("li",{children:(0,f.jsx)(u.rU,{to:"/admin/brands",children:"Brands"})}),(0,f.jsx)("li",{children:(0,f.jsx)(u.rU,{to:"/admin/categories",children:"Categories"})}),(0,f.jsx)("li",{children:(0,f.jsx)(u.rU,{to:"/admin/users",children:"Users"})}),(0,f.jsx)("li",{children:(0,f.jsx)(u.rU,{to:"/admin/admins",children:"Admins"})}),(0,f.jsx)("li",{children:(0,f.jsx)(u.rU,{to:"/admin/login",style:{color:"red"},children:"Logout"})})]})})};const y=function(){(0,a.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[]);const{data:e,refetch:r}=(0,_.rS)("/admin"),i=(0,x.s0)(),v=localStorage.getItem("admin-token"),y=(e=>{if(!e||"undefined"===e)return void i("/admin/login");const r=JSON.parse(atob(e.split(".")[1]));return Math.floor(Date.now()/1e3)>=r.exp})(v);console.log("===>",y),(0,a.useEffect)((()=>{y&&alert("Session has expired"),(y||!v||v.length<1)&&i("/admin/login")}),[y]);const[N,w]=(0,a.useState)(!1),C=()=>{w(!N)};return(0,f.jsxs)("div",{className:s,children:[(0,f.jsx)("div",{className:n,children:(0,f.jsxs)("div",{className:o,children:[(0,f.jsx)(u.rU,{to:"/admin/dashboard","aria-label":"logo",children:(0,f.jsx)(g.Z,{src:"/images/logo.webp",width:50,height:50})})," "]})}),(0,f.jsxs)("div",{className:l,children:[(0,f.jsx)(u.rU,{to:"/admin/dashboard","aria-label":"User name",children:(0,f.jsxs)("div",{className:d,children:[(0,f.jsx)("span",{children:null===e||void 0===e?void 0:e.firstname.substr(0,1)}),(0,f.jsx)("span",{children:null===e||void 0===e?void 0:e.lastname.substr(0,1)})]})}),(0,f.jsx)("div",{className:p,children:(0,f.jsx)(j.cur,{size:25,onClick:C})})]}),N&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{id:"mobile_wrapper",className:t,onClick:e=>{var r;"mobile_wrapper"===(null===(r=e.target)||void 0===r?void 0:r.id)&&C()},children:(0,f.jsxs)("div",{className:c,children:[(0,f.jsx)("div",{className:m,children:(0,f.jsx)(h.aHS,{size:45,color:"white",onClick:C})}),(0,f.jsx)(b,{})]})})})]})},N="AdminWrapperStyles_main__ndYGg",w=e=>{let{children:r}=e;const[i,s]=(0,a.useState)(!0);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(y,{}),(0,f.jsxs)("main",{className:N,children:[(0,f.jsx)("aside",{children:(0,f.jsx)(b,{})}),(0,f.jsx)("article",{children:r})]})]})}},1399:(e,r,i)=>{i.r(r),i.d(r,{default:()=>j});var a=i(2791),s=i(9970),n=i(5186),l=i(5705),d=i(8007),o=i(9126),t=i(2189),c=i(335),m=i(1830),p=i.n(m),h=i(6871),u=i(3024),x=i(1574),_=i(184);const g=d.Ry().shape({name:d.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Please enter your first name"),description:d.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Please eneter your last name"),category:d.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Please eneter your last name"),brand:d.Z_().min(2,"Too Short!").max(190,"Too Long!").required("Phone number is required"),price:d.Z_().min(2,"Too Short!").max(190,"Too Long!").required("Price is required")});const j=function(){let[e,r]=(0,a.useState)([]);(0,h.s0)();const[i,d]=(0,a.useState)({property:"",value:""}),{data:m=[]}=(0,t.$L)("/brands"),{data:j=[]}=(0,t.$L)("/categories"),[v,{isLoading:f}]=(0,c.J8)(),{id:b}=(0,h.UO)(),{data:y={},refetch:N}=(0,t.$L)("/product/"+b),[w,C]=(0,a.useState)({image1:null,image2:null,image3:null}),[Z,S]=(0,a.useState)({image1:"",image2:"",image3:""});let[P,F]=(0,a.useState)(1);(0,a.useEffect)((()=>{if(N(),null!==y&&void 0!==y&&y._id){let e=setTimeout((()=>{F(Math.random()),console.log(":::::",JSON.parse(y.specifications)),r(JSON.parse(y.specifications)),S({image1:(0,u.r)()+(null===y||void 0===y?void 0:y.image1),image2:(0,u.r)()+(null===y||void 0===y?void 0:y.image2),image3:(0,u.r)()+(null===y||void 0===y?void 0:y.image3)})}),100);return()=>clearTimeout(e)}}),[null===y||void 0===y?void 0:y._id,y.specifications]);const A=e=>{d((r=>({...r,[e.target.name]:e.target.value})))},k=()=>{if(e.filter((e=>e.property===i.property)).length>0)return alert("Item already exists");r([...e,{...i,id:Math.random().toString()}]),T((e=>({...e,spec:""})))},U=(e,r)=>{var i,a;const s=null===(i=e.target)||void 0===i||null===(a=i.files)||void 0===a?void 0:a[0];C((e=>({...e,[r]:s}))),s&&(S((e=>({...e,[r]:URL.createObjectURL(s)}))),T((e=>({...e,images:""}))))},[O,T]=(0,a.useState)({spec:"",images:""});return console.log(":::",O),(0,_.jsx)(s.Z,{children:(0,_.jsx)("div",{children:(0,_.jsx)(l.J9,{initialValues:{name:null===y||void 0===y?void 0:y.name,description:null===y||void 0===y?void 0:y.description,category:null===y||void 0===y?void 0:y.category,brand:null===y||void 0===y?void 0:y.brand,price:null===y||void 0===y?void 0:y.price},onSubmit:r=>{if(console.log("::::",r),e.length<1)return T((e=>({...e,spec:"Please add specifications"}))),console.log("Please add specifications");const i=new FormData;i.append("name",r.name),i.append("description",r.description),i.append("category",r.category),i.append("brand",r.brand),i.append("price",r.price),i.append("_id",null===y||void 0===y?void 0:y._id),i.append("specifications",JSON.stringify(e)),w.image1&&i.append("uploads",w.image1),w.image2&&i.append("uploads",w.image2),w.image3&&i.append("uploads",w.image3),v({url:"/update-product",body:i}).unwrap().then((e=>{p().fire({icon:"success",title:e.message}),window.location.href="/product/"+(null===e||void 0===e?void 0:e._id)})).catch((e=>{p().fire({icon:"error",title:"Oops...",text:e.data.message}),console.log(e)}))},validationSchema:g,children:a=>{var s,l,d;let{handleChange:t,handleSubmit:c,setFieldTouched:p,touched:h,isValid:u,values:g,errors:v}=a;return(0,_.jsxs)("div",{className:n.Z.form,children:[(0,_.jsx)("p",{className:n.Z.form_title,children:"Create product"}),(0,_.jsxs)("div",{className:n.Z.form_row,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"",children:" Name"}),(0,_.jsx)("input",{type:"text",placeholder:"John",name:"name",value:g.name,onChange:t("name")}),h.name&&v.name&&(0,_.jsx)("p",{className:n.Z.error,children:v.name})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"",children:" Description"}),(0,_.jsx)("input",{type:"text",placeholder:"enter product description",name:"description",value:g.description,onChange:t("description")}),h.description&&v.description&&(0,_.jsx)("p",{className:n.Z.error,children:v.description})]})]}),(0,_.jsxs)("div",{className:n.Z.form_row,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"",children:"Category"}),(0,_.jsxs)("select",{name:"category",id:"",value:g.category,onChange:t("category"),children:[(0,_.jsx)("option",{value:"",children:"Select Category"}),j.map(((e,r)=>(0,_.jsx)("option",{value:e.name,children:e.name},r)))]}),h.category&&v.category&&(0,_.jsx)("p",{className:n.Z.error,children:v.category})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"",children:"Brand"}),(0,_.jsxs)("select",{name:"brand",id:"",value:g.brand,onChange:t("brand"),children:[(0,_.jsx)("option",{value:"",children:"Select brand"}),m.map(((e,r)=>(0,_.jsx)("option",{value:e.name,children:e.name},r)))]}),h.brand&&v.brand&&(0,_.jsx)("p",{className:n.Z.error,children:v.brand})]})]}),(0,_.jsxs)("div",{className:n.Z.form_list,children:[(0,_.jsx)("label",{htmlFor:"",children:" Price"}),(0,_.jsx)("input",{type:"number",placeholder:"Enter product price",name:"price",value:g.price,onChange:t("price")}),h.price&&v.price&&(0,_.jsx)("p",{className:n.Z.error,children:v.price})]}),(0,_.jsxs)("div",{className:n.Z.form_row_2,children:[(0,_.jsxs)("div",{className:n.Z.form_row_2_xx,children:[(0,_.jsx)("label",{htmlFor:"",children:"Enter specifications "}),(0,_.jsxs)("div",{className:n.Z.spec_wrapper,children:[(0,_.jsx)("input",{type:"text",name:"property",placeholder:"Property",onChange:A}),(0,_.jsx)("input",{type:"text",name:"value",placeholder:"Value",onChange:A}),(0,_.jsx)("button",{disabled:""===i.property||""===i.value,onClick:k,children:"Add Spec"}),O.spec&&(0,_.jsx)("p",{className:n.Z.error,children:O.spec})]}),(0,_.jsx)("div",{className:n.Z.form_row_2_xx,children:e.map((i=>(0,_.jsxs)("div",{className:n.Z.spec_items,children:[(0,_.jsxs)("b",{children:[i.property,":"]})," ",(0,_.jsx)("span",{children:i.value})," ",(0,_.jsx)("b",{children:(0,_.jsx)(o.yvY,{onClick:()=>(i=>{let a=e.filter((e=>e.id!==i));r(a)})(i.id)})})]})))})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{htmlFor:"",children:"Add images "}),(0,_.jsxs)("div",{className:n.Z.img_wrappers,children:[(0,_.jsxs)("div",{className:n.Z.img_box_wrapper,children:[(null===Z||void 0===Z||null===(s=Z.image1)||void 0===s?void 0:s.length)>0&&(0,_.jsx)("img",{src:Z.image1,alt:""}),(0,_.jsxs)("div",{className:n.Z.plus_wrapper,children:[(0,_.jsxs)("label",{htmlFor:"img1",children:[(0,_.jsx)(o.B8K,{size:25}),(0,_.jsx)("input",{type:"file",id:"img1",style:{display:"none"},name:"image1",accept:"image/*",onChange:e=>U(e,"image1")})]})," "]})]}),(0,_.jsxs)("div",{className:n.Z.img_box_wrapper,children:[(null===Z||void 0===Z||null===(l=Z.image2)||void 0===l?void 0:l.length)>0&&(0,_.jsx)("img",{src:Z.image2,alt:""})," ",(0,_.jsx)("div",{className:n.Z.plus_wrapper,children:(0,_.jsxs)("label",{htmlFor:"img2",children:[(0,_.jsx)(o.B8K,{size:25}),(0,_.jsx)("input",{type:"file",id:"img2",style:{display:"none"},name:"image2",onChange:e=>U(e,"image2")})]})})]}),(0,_.jsxs)("div",{className:n.Z.img_box_wrapper,children:[(null===Z||void 0===Z||null===(d=Z.image3)||void 0===d?void 0:d.length)>0&&(0,_.jsx)("img",{src:Z.image3,alt:""})," ",(0,_.jsxs)("div",{className:n.Z.plus_wrapper,children:[(0,_.jsxs)("label",{htmlFor:"img3",children:[(0,_.jsx)(o.B8K,{size:25}),(0,_.jsx)("input",{type:"file",id:"img3",style:{display:"none"},name:"image3",accept:"image/*",onChange:e=>U(e,"image3")})]})," "]})]})]}),O.images&&(0,_.jsx)("p",{className:n.Z.error,children:O.images})]})]}),(0,_.jsx)("br",{}),(0,_.jsx)("div",{className:n.Z.form_list,children:(0,_.jsx)("button",{type:"submit",onClick:()=>c(),children:f?(0,_.jsx)(x.Z,{}):"Next"})})]})}},P)})})}},5186:(e,r,i)=>{i.d(r,{Z:()=>a});const a={form_title:"CreateProduct_form_title__HmxAO",form_row:"CreateProduct_form_row__HNkF0",form:"CreateProduct_form__zfJNk",form_list:"CreateProduct_form_list__lIEP-",img_box_wrapper:"CreateProduct_img_box_wrapper__phS+W",plus_wrapper:"CreateProduct_plus_wrapper__Wko1F",img_wrappers:"CreateProduct_img_wrappers__CmIXC",form_row_2:"CreateProduct_form_row_2__LfdH7",form_row_2_xx:"CreateProduct_form_row_2_xx__coIFf",error:"CreateProduct_error__c5CDF",spec_items:"CreateProduct_spec_items__CVOgx",spec_wrapper:"CreateProduct_spec_wrapper__RvFNo"}}}]);
//# sourceMappingURL=399.9f180de4.chunk.js.map